Object.defineProperty(exports, "__esModule", { value: true });
exports.getScaleWrapped = void 0;
var Ani_1 = require("../ani/Ani");
var Component_1 = require("../component/Component");
function getScaleWrapped(child, scale) {
    var scaleFunc;
    if (typeof scale === "function") {
        scaleFunc = scale;
    }
    else {
        scaleFunc = function () { return scale; };
    }
    var ani = new Ani_1.Ani();
    var wrapper = new Component_1.Component();
    if (child instanceof Ani_1.Ani) {
        ani.getComponent = function (sec) {
            var comp = child.getComponent(sec);
            if (!comp)
                return null;
            wrapper.position = comp.position;
            return getComp(sec, comp);
        };
    }
    else {
        wrapper.children.push(child);
        wrapper.position = child.position;
        ani.getComponent = function (sec) {
            return getComp(sec, child);
        };
    }
    return ani;
    function getComp(sec, comp) {
        var s = scaleFunc(sec);
        if (typeof s === "number") {
            s = { x: s, y: s };
        }
        comp.position = { x: 0, y: 0 };
        wrapper.scale = s;
        wrapper.children = [comp];
        return wrapper;
    }
}
exports.getScaleWrapped = getScaleWrapped;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2NhbGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29yZS93cmFwcGVyL1NjYWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsa0NBQWlDO0FBQ2pDLG9EQUFtRDtBQUNuRCxTQUFnQixlQUFlLENBQzdCLEtBQXNCLEVBQ3RCLEtBRzZCO0lBRTdCLElBQUksU0FBNkQsQ0FBQztJQUNsRSxJQUFJLE9BQU8sS0FBSyxLQUFLLFVBQVUsRUFBRTtRQUMvQixTQUFTLEdBQUcsS0FBSyxDQUFDO0tBQ25CO1NBQU07UUFDTCxTQUFTLEdBQUcsY0FBTSxPQUFBLEtBQUssRUFBTCxDQUFLLENBQUM7S0FDekI7SUFDRCxJQUFNLEdBQUcsR0FBRyxJQUFJLFNBQUcsRUFBRSxDQUFDO0lBQ3RCLElBQU0sT0FBTyxHQUFHLElBQUkscUJBQVMsRUFBRSxDQUFDO0lBQ2hDLElBQUksS0FBSyxZQUFZLFNBQUcsRUFBRTtRQUN4QixHQUFHLENBQUMsWUFBWSxHQUFHLFVBQUMsR0FBRztZQUNyQixJQUFNLElBQUksR0FBRyxLQUFLLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxJQUFJO2dCQUFFLE9BQU8sSUFBSSxDQUFDO1lBQ3ZCLE9BQU8sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNqQyxPQUFPLE9BQU8sQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDNUIsQ0FBQyxDQUFDO0tBQ0g7U0FBTTtRQUNMLE9BQU8sQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzdCLE9BQU8sQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQztRQUNsQyxHQUFHLENBQUMsWUFBWSxHQUFHLFVBQUMsR0FBRztZQUNyQixPQUFPLE9BQU8sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDO0tBQ0g7SUFDRCxPQUFPLEdBQUcsQ0FBQztJQUVYLFNBQVMsT0FBTyxDQUFDLEdBQVcsRUFBRSxJQUFlO1FBQzNDLElBQUksQ0FBQyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QixJQUFJLE9BQU8sQ0FBQyxLQUFLLFFBQVEsRUFBRTtZQUN6QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztTQUNwQjtRQUNELElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQztRQUMvQixPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNsQixPQUFPLENBQUMsUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsT0FBTyxPQUFPLENBQUM7SUFDakIsQ0FBQztBQUNILENBQUM7QUF6Q0QsMENBeUNDIn0=