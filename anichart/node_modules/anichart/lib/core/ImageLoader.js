Object.defineProperty(exports, "__esModule", { value: true });
exports.imageLoader = exports.ImageLoader = void 0;
var ImageLoader = /** @class */ (function () {
    function ImageLoader() {
        this.load = function (url) {
            return new Promise(function (resolve) {
                if (typeof window === "undefined") {
                    // Load image in node.js
                    var loadImage = require("canvas").loadImage;
                    loadImage(url).then(function (image) {
                        resolve(image);
                    });
                }
                else {
                    var image_1 = new Image();
                    image_1.onload = function () {
                        resolve(image_1);
                    };
                    image_1.onerror = function () {
                        // if error, still accept the result but not load this image
                        resolve(null);
                    };
                    image_1.src = url;
                    image_1.crossOrigin = "anonymous";
                }
            });
        };
    }
    return ImageLoader;
}());
exports.ImageLoader = ImageLoader;
exports.imageLoader = new ImageLoader();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZ2VMb2FkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29yZS9JbWFnZUxvYWRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBO0lBRUU7UUFDRSxJQUFJLENBQUMsSUFBSSxHQUFHLFVBQUMsR0FBVztZQUN0QixPQUFBLElBQUksT0FBTyxDQUFDLFVBQUMsT0FBTztnQkFDbEIsSUFBSSxPQUFPLE1BQU0sS0FBSyxXQUFXLEVBQUU7b0JBQ2pDLHdCQUF3QjtvQkFDaEIsSUFBQSxTQUFTLEdBQUssT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUF0QixDQUF1QjtvQkFDeEMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FDakIsVUFDRSxLQUdRO3dCQUVSLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDakIsQ0FBQyxDQUNGLENBQUM7aUJBQ0g7cUJBQU07b0JBQ0wsSUFBTSxPQUFLLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQztvQkFDMUIsT0FBSyxDQUFDLE1BQU0sR0FBRzt3QkFDYixPQUFPLENBQUMsT0FBSyxDQUFDLENBQUM7b0JBQ2pCLENBQUMsQ0FBQztvQkFDRixPQUFLLENBQUMsT0FBTyxHQUFHO3dCQUNkLDREQUE0RDt3QkFDNUQsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUNoQixDQUFDLENBQUM7b0JBQ0YsT0FBSyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7b0JBQ2hCLE9BQUssQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO2lCQUNqQztZQUNILENBQUMsQ0FBQztRQTFCRixDQTBCRSxDQUFDO0lBQ1AsQ0FBQztJQUNILGtCQUFDO0FBQUQsQ0FBQyxBQWhDRCxJQWdDQztBQWhDWSxrQ0FBVztBQWtDWCxRQUFBLFdBQVcsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDIn0=