var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.TextLinesAni = void 0;
var Text_1 = require("../component/Text");
var Ani_1 = require("./Ani");
var Constant_1 = require("../Constant");
var TextLinesAni = /** @class */ (function (_super) {
    __extends(TextLinesAni, _super);
    function TextLinesAni() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.component = new Text_1.Text();
        _this.lineSpacing = 0;
        _this.children = new Array();
        return _this;
    }
    TextLinesAni.prototype.getComponent = function (sec) {
        var _this = this;
        var _a;
        this.component.text = "";
        this.component.children = [];
        var basePosY = 0;
        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (textAni) {
            var _a, _b, _c;
            var comp;
            if (textAni instanceof Ani_1.Ani) {
                comp = textAni.getComponent(sec);
                if (!comp)
                    return;
            }
            else {
                comp = textAni;
            }
            if (!comp.position) {
                if (comp.type === "component" && _this.stage && _this.stage.canvas) {
                    comp.position = {
                        x: _this.stage.canvas.width / 2,
                        y: _this.stage.canvas.height / 2,
                    };
                }
                else {
                    comp.position = {
                        x: 0,
                        y: 0,
                    };
                }
            }
            comp.position.y = basePosY;
            if (comp instanceof Text_1.Text) {
                var fontSize = comp.fontSize
                    ? comp.fontSize
                    : (_a = _this.component.fontSize) !== null && _a !== void 0 ? _a : Constant_1.fontSize;
                basePosY += comp.position.y + _this.lineSpacing + fontSize;
            }
            (_c = (_b = _this.component) === null || _b === void 0 ? void 0 : _b.children) === null || _c === void 0 ? void 0 : _c.push(comp);
        });
        return this.component;
    };
    return TextLinesAni;
}(Ani_1.Ani));
exports.TextLinesAni = TextLinesAni;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dExpbmVzQW5pLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvcmUvYW5pL1RleHRMaW5lc0FuaS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFDQSwwQ0FBeUM7QUFDekMsNkJBQTRCO0FBQzVCLHdDQUEwRDtBQUUxRDtJQUFrQyxnQ0FBRztJQUFyQztRQUFBLHFFQXlDQztRQXhDQyxlQUFTLEdBQVMsSUFBSSxXQUFJLEVBQUUsQ0FBQztRQUM3QixpQkFBVyxHQUFHLENBQUMsQ0FBQztRQUNoQixjQUFRLEdBQVcsSUFBSSxLQUFLLEVBQVEsQ0FBQzs7SUFzQ3ZDLENBQUM7SUFyQ0MsbUNBQVksR0FBWixVQUFhLEdBQVc7UUFBeEIsaUJBb0NDOztRQW5DQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7UUFDekIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQzdCLElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztRQUNqQixNQUFBLElBQUksQ0FBQyxRQUFRLDBDQUFFLE9BQU8sQ0FBQyxVQUFDLE9BQU87O1lBQzdCLElBQUksSUFBc0IsQ0FBQztZQUUzQixJQUFJLE9BQU8sWUFBWSxTQUFHLEVBQUU7Z0JBQzFCLElBQUksR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNqQyxJQUFJLENBQUMsSUFBSTtvQkFBRSxPQUFPO2FBQ25CO2lCQUFNO2dCQUNMLElBQUksR0FBRyxPQUFPLENBQUM7YUFDaEI7WUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDbEIsSUFBSSxJQUFJLENBQUMsSUFBSSxLQUFLLFdBQVcsSUFBSSxLQUFJLENBQUMsS0FBSyxJQUFJLEtBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO29CQUNoRSxJQUFJLENBQUMsUUFBUSxHQUFHO3dCQUNkLENBQUMsRUFBRSxLQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsQ0FBQzt3QkFDOUIsQ0FBQyxFQUFFLEtBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDO3FCQUNoQyxDQUFDO2lCQUNIO3FCQUFNO29CQUNMLElBQUksQ0FBQyxRQUFRLEdBQUc7d0JBQ2QsQ0FBQyxFQUFFLENBQUM7d0JBQ0osQ0FBQyxFQUFFLENBQUM7cUJBQ0wsQ0FBQztpQkFDSDthQUNGO1lBQ0QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDO1lBQzNCLElBQUksSUFBSSxZQUFZLFdBQUksRUFBRTtnQkFDeEIsSUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVE7b0JBQzVCLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUTtvQkFDZixDQUFDLE9BQUMsS0FBSSxDQUFDLFNBQVMsQ0FBQyxRQUFRLG1DQUFJLG1CQUFlLENBQUM7Z0JBQy9DLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxLQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQzthQUMzRDtZQUNELFlBQUEsS0FBSSxDQUFDLFNBQVMsMENBQUUsUUFBUSwwQ0FBRSxJQUFJLENBQUMsSUFBSSxFQUFFO1FBQ3ZDLENBQUMsRUFBRTtRQUNILE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QixDQUFDO0lBQ0gsbUJBQUM7QUFBRCxDQUFDLEFBekNELENBQWtDLFNBQUcsR0F5Q3BDO0FBekNZLG9DQUFZIn0=