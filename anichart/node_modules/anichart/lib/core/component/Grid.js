var __extends = (this && this.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
        return extendStatics(d, b);
    };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.Grid = void 0;
var Component_1 = require("./Component");
var Grid = /** @class */ (function (_super) {
    __extends(Grid, _super);
    function Grid(options) {
        var _a, _b, _c;
        var _this = _super.call(this, options) || this;
        _this.col = (_a = options === null || options === void 0 ? void 0 : options.col) !== null && _a !== void 0 ? _a : 3;
        _this.row = (_b = options === null || options === void 0 ? void 0 : options.row) !== null && _b !== void 0 ? _b : undefined;
        _this.shape = (_c = options === null || options === void 0 ? void 0 : options.shape) !== null && _c !== void 0 ? _c : undefined;
        return _this;
    }
    Grid.prototype.setup = function (stage) {
        var _this = this;
        var _a;
        _super.prototype.setup.call(this, stage);
        this.row = (_a = this.row) !== null && _a !== void 0 ? _a : Math.floor(this.children.length / this.col) + 1;
        if (!this.shape) {
            this.shape = {
                width: stage.canvas.width,
                height: stage.canvas.height,
            };
        }
        var height = this.shape.height / this.row;
        var width = this.shape.width / this.col;
        this.children.forEach(function (item, index) {
            var col = index % _this.col;
            var row = Math.floor(index / _this.col);
            if (item instanceof Component_1.Component) {
                item.position = { x: width * col + width / 2, y: height * row };
            }
            else {
                var getComp_1 = item.getComponent;
                item.getComponent = function (sec) {
                    var comp = getComp_1(sec);
                    if (comp) {
                        comp.position = { x: width * col + width / 2, y: height * row };
                    }
                    return comp;
                };
            }
        });
    };
    return Grid;
}(Component_1.Component));
exports.Grid = Grid;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR3JpZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb3JlL2NvbXBvbmVudC9HcmlkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUNBLHlDQUF5RDtBQU96RDtJQUEwQix3QkFBUztJQUlqQyxjQUFZLE9BQXFCOztRQUFqQyxZQUNFLGtCQUFNLE9BQU8sQ0FBQyxTQUtmO1FBSkMsS0FBSSxDQUFDLEdBQUcsU0FBRyxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsR0FBRyxtQ0FBSSxDQUFDLENBQUM7UUFDN0IsS0FBSSxDQUFDLEdBQUcsU0FBRyxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsR0FBRyxtQ0FBSSxTQUFTLENBQUM7UUFFckMsS0FBSSxDQUFDLEtBQUssU0FBRyxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsS0FBSyxtQ0FBSSxTQUFTLENBQUM7O0lBQzNDLENBQUM7SUFDRCxvQkFBSyxHQUFMLFVBQU0sS0FBWTtRQUFsQixpQkEyQkM7O1FBMUJDLGlCQUFNLEtBQUssWUFBQyxLQUFLLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMsR0FBRyxTQUFHLElBQUksQ0FBQyxHQUFHLG1DQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2RSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtZQUNmLElBQUksQ0FBQyxLQUFLLEdBQUc7Z0JBQ1gsS0FBSyxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSztnQkFDekIsTUFBTSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTTthQUM1QixDQUFDO1NBQ0g7UUFDRCxJQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDO1FBQzVDLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDMUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBQyxJQUFJLEVBQUUsS0FBSztZQUNoQyxJQUFNLEdBQUcsR0FBRyxLQUFLLEdBQUcsS0FBSSxDQUFDLEdBQUcsQ0FBQztZQUM3QixJQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssR0FBRyxLQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDekMsSUFBSSxJQUFJLFlBQVkscUJBQVMsRUFBRTtnQkFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUMsRUFBRSxLQUFLLEdBQUcsR0FBRyxHQUFHLEtBQUssR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sR0FBRyxHQUFHLEVBQUUsQ0FBQzthQUNqRTtpQkFBTTtnQkFDTCxJQUFNLFNBQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO2dCQUNsQyxJQUFJLENBQUMsWUFBWSxHQUFHLFVBQUMsR0FBVztvQkFDOUIsSUFBTSxJQUFJLEdBQUcsU0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUMxQixJQUFJLElBQUksRUFBRTt3QkFDUixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxFQUFFLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsTUFBTSxHQUFHLEdBQUcsRUFBRSxDQUFDO3FCQUNqRTtvQkFDRCxPQUFPLElBQUksQ0FBQztnQkFDZCxDQUFDLENBQUM7YUFDSDtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNILFdBQUM7QUFBRCxDQUFDLEFBdkNELENBQTBCLHFCQUFTLEdBdUNsQztBQXZDWSxvQkFBSSJ9